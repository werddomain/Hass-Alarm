var Panel=function(){function n(){var n=this,t;this.actions={arm:"arm",disarm:"disarm",arm_home:"arm_home",unlock:"unlock"};this.lockTimerHandler=null;t=this;this.pin="";this.numbers=$("#numberInputs .numberinput");$(".btn-lock").click(function(){n.Lock()});$(".cmdButton").click(function(){var n=$(this).data("state");t.action(n)});$(".content").click(function(t){var u=$(t.target),i=u.find(".number"),r=i.text();i.hasClass("accept")?(n.action(n.actions.unlock),n.ClearPin()):i.hasClass("delete")?(n.pin.length>0&&(n.pin=n.pin.substr(0,n.pin.length-1)),$($(".numberinput").get().reverse()).each(function(){var n=$(this).text();if(n)return $(this).text(""),$(this).removeClass("nocircle"),!1})):r!=="<"&&n.pin.length<n.numbers.length&&(n.pin+=r,$(".numberinput").each(function(){var n=$(this).text();if(!n)return $(this).text("*"),$(this).addClass("nocircle"),!1}));$("#pin-code").val(n.pin)});this.displayState($("#startup-state").val());$("form[ajax=true]").submit(function(n){n.preventDefault();var t=$(this).serialize(),i=$(this).attr("action"),r=$(this).attr("method").toUpperCase();$("#loadingimg").show();$.ajax({url:i,type:r,data:t,cache:!1,success:function(n){$("#result").html(n);$("#loadingimg").hide()}})})}return n.prototype.displayState=function(n){var t=$("#StateIcon"),i=$("#StateText"),r=$("#StateColor");if(n!=this.actions.unlock)switch(n){case this.actions.arm:t.attr("class","mdi mdi-bell-alert");i.text("Armé");r.attr("class","text-danger");break;case this.actions.arm_home:t.attr("class","mdi mdi-bell-circle");i.text("Armé à la maison");r.attr("class","text-warning");break;case this.actions.disarm:t.attr("class","mdi mdi-bell-off");i.text("Désarmé");r.attr("class","text-success")}},n.prototype.action=function(n){$("#action-field").val(n);$("#send").click()},n.prototype.ClearPin=function(){this.numbers.removeClass("nocircle");this.pin=""},n.prototype.refreshLock=function(){var n=this;this.lockTimerHandler&&clearTimeout(this.lockTimerHandler);this.lockTimerHandler=setTimeout(function(){n.Lock()},3e4)},n.prototype.Unlock=function(){$(".UnLocked").removeClass("hidden");$(".Locked").addClass("hidden");this.refreshLock()},n.prototype.Lock=function(){this.lockTimerHandler&&clearTimeout(this.lockTimerHandler);this.lockTimerHandler=null;this.ClearPin();$("#pin-code").val("");$(".UnLocked").addClass("hidden");$(".Locked").removeClass("hidden")},n.prototype.refreshDisplay=function(n){this.ClearPin();this.isAuthorized(n)?(this.Unlock(),this.displayState(n.State)):this.Lock()},n.prototype.isAuthorized=function(n){return n.authorized==!0},n}(),p=new Panel;